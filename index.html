<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Beat Me</title>
    <style>
      #stop-start {
        font-size: 36px;
        height: 100px;
        width: 500px;
      }
    </style>
    <script>
      // App

      var tracks = [
        {
          name: 'Perc126-01',
          sound: 'Perc126-01.wav',
          // sound: new Audio('Perc126-01.wav'),
          steps: [true, false, true, false, true, false, true, false]
        },
        {
          name: 'PercFX126-01',
          sound: 'PercFX126-01.wav',
          // sound: new Audio('PercFX126-01.wav'),
          steps: [false, false, false, false, false, false, false, false]
        }
      ]

      var bpm = 100
      var stepTime = 1000 * 60 / bpm
      var numSteps = 8
      var currentStep = 0
      var intervalId = null

      function beat () {
        console.log('step:', currentStep)
        currentStep++
        if (currentStep >= numSteps)
          currentStep = 0
        for (let i = 0; i < tracks.length; i++) {
          let track = tracks[i]
          if (track.steps[currentStep]) {
            // track.sound.currentTime = 0
            // track.sound.play()
            new Audio(track.sound).play()
          }
        }
      }

      function clickStopStart () {
        if (isPlaying())
          stop()
        else
          start()
      }

      function isPlaying () {
        return intervalId !== null
      }

      function start () {
        document.getElementById('stop-start').innerHTML = "Stop"
        intervalId = setInterval(beat, stepTime)
      }

      function stop () {
        document.getElementById('stop-start').innerHTML = "Start"
        clearInterval(intervalId)
        intervalId = null
      }


    </script>
  </head>
  <body>
    <button id="stop-start" onclick="clickStopStart()">Start</button>
    <table style="width:100%">
      <tr>
        <th>Firstname</th>
        <th>Lastname</th>
        <th>Age</th>
      </tr>
      <tr>
        <td>Jill</td>
        <td>Smith</td>
        <td>50</td>
      </tr>
      <tr>
        <td>Eve</td>
        <td>Jackson</td>
        <td>94</td>
      </tr>
    </table>
  </body>
</html>
