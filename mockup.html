<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha484-rwoIResjU2yc4z8GV/NPeZWAv56rSmLldC4R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <link rel="stylesheet" href="main.css">
    <title>Beat Me</title>
    <script>
      // App

      var tracks = [
        {
          name: 'Perc126-01',
          sound: 'Perc126-01.wav',
          // sound: new Audio('Perc126-01.wav'),
          steps: [true, false, true, false, true, false, true, false]
        },
        {
          name: 'PercFX126-01',
          sound: 'PercFX126-01.wav',
          // sound: new Audio('PercFX126-01.wav'),
          steps: [false, false, false, false, false, false, false, false]
        }
      ]

      var bpm = 100
      var stepTime = 1000 * 60 / bpm
      var numSteps = 8
      var currentStep = 0
      var intervalId = null

      function beat () {
        console.log('step:', currentStep)
        currentStep++
        if (currentStep >= numSteps)
          currentStep = 0
        for (let i = 0; i < tracks.length; i++) {
          let track = tracks[i]
          if (track.steps[currentStep]) {
            // track.sound.currentTime = 0
            // track.sound.play()
            new Audio(track.sound).play()
          }
        }
      }

      function clickStopStart () {
        if (isPlaying())
          stop()
        else
          start()
      }

      function isPlaying () {
        return intervalId !== null
      }

      function start () {
        document.getElementById('stop-start').innerHTML = "Stop"
        intervalId = setInterval(beat, stepTime)
      }

      function stop () {
        document.getElementById('stop-start').innerHTML = "Start"
        clearInterval(intervalId)
        intervalId = null
      }


    </script>
  </head>
<body>
  <h1>BEAT ME UP</h1>
    <div class="container-fluid">
      <div class="row">
        <button type="button" class="col-4 btn btn-default">Synth</button>
        <button type="button" class="col-1 btn btn-default">.</button>
        <button type="button" class="col-1 btn btn-default">.</button>
        <button type="button" class="col-1 btn btn-default">.</button>
        <button type="button" class="col-1 btn btn-default">.</button>
        <button type="button" class="col-1 btn btn-default">.</button>
        <button type="button" class="col-1 btn btn-default">.</button>
        <button type="button" class="col-1 btn btn-default">.</button>
        <button type="button" class="col-1 btn btn-default">.</button>
      </div>
      <div class="row">
        <div class="col-4">Synth</div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
      </div>
      <div class="row">
        <div class="col-4">Kick</div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
      </div>
      <div class="row">
        <div class="col-4">Snare</div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
      </div>
      <div class="row">
        <div class="col-4">Hat</div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
      </div>
      <div class="row">
        <div class="col-4">Tom</div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
      </div>
      <div class="row">
        <div class="col-4">Fx</div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
        <div class="col-1"></div>
      </div>
      <div class="row">
          <button class="btn btn-default col-8 start" onclick="clickStopStart()">START</button>
          <button class="btn btn-default col-4 bpm">BPM</button>
      </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha484-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs4hpfag6Ed950n" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha484-DztdAPBWPRXSA/4eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha484-vBWWzlZJ8ea9aCX4pEW4rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
  <script src="bundle.js"></script>
</body>
</html>
